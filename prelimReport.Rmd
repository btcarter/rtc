---
title: "OAT"
author: "Benjamin Carter"
date: "6/11/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# paths V:\Depts\CtrTransRsch\Dept Private\CTR Staff\PROJECT - Readiness to change manuscript\DATA
data.dir.path <- file.path(
  "V:",
  "Depts", 
  "CtrTransRsch", 
  "Dept Private", 
  "CTR Staff", 
  "PROJECT - Readiness to change manuscript", 
  "DATA"
  )
```

```{r loadData, include=FALSE}
df <- readxl::read_xlsx(
  file.path(data.dir.path, "Nick_Rural16_OAT 6-11-20.xlsx")
  )

df2 <- readxl::read_xlsx(
  file.path(data.dir.path, "OAT_16S_0820_2018.xlsx")
  )
```


```{r selection}
df.processed <- df %>% 
  mutate(
    Gender = ifelse(
      Gender == 1,
      "Female",
      "Male"
      ),
    rtc_diet = ifelse(
      
    ),
    rtc_exercise
  ) %>% 
  filter(
    !is.na(`1a_pre`)
  ) %>% 
  select(
    Gender,
    Age,
    Weight = Todays_Weight,
    MaxWeightLost,
    pWeightLost
  )


# Dependent variables (outcomes):
# •	> 7% weight loss over all the program
# •	> 7% weight loss during core
# •	> 5% weight loss over all the program
# •	> 5% weight loss during core
# •	% weight loss over all the program
# •	% weight loss during core
# 
# Dependent and independent variables
# •	Number of core sessions attended (or completed core yes/no as dependent variable)
# •	Number of post core sessions attended
# •	Number of total sessions attended (or completed program yes/no as dependent variable)
# •	Met daily fat gram goal
# •	Reported daily fat gram intake
# •	Met weekly activity goal
# •	Reported weekly activity minutes


```


# Descriptives

```{r}
tab1 <- compareGroups::compareGroups(
   ~ . - Site - Time - ID - Group - StudyID,
  data = df.processed
  )

compareGroups::createTable(
  tab1
  )

```

# Regression

```{r}
model <- glm(formula = rtc_diet*rtc_exercise + Age + Gender + BMI, data = df.processed, family = binomial) %>% summary()
```



